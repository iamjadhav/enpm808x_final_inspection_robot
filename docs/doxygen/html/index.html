<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ENPM808X Final Inspection Robot: enpm808x_final_inspection_robot</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ENPM808X Final Inspection Robot
   &#160;<span id="projectnumber">v1.0</span>
   </div>
   <div id="projectbrief">Final project for Group 7</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">enpm808x_final_inspection_robot </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://app.travis-ci.com/rnvandemark/enpm808x_final_inspection_robot"></a> <a href="https://coveralls.io/github/rnvandemark/enpm808x_final_inspection_robot?branch=master"></a></p>
<h2>Project Overview/Description</h2>
<p><b>TODO</b></p>
<p>See the license for this project <a href="LICENSE.txt">here</a>.</p>
<h2>Personnel</h2>
<h3>Aditya Jadhav</h3>
<p><b>TODO</b></p>
<h4>Abhishek Nalawade</h4>
<p><b>TODO</b></p>
<h4>R. Nick Vandemark</h4>
<p><b>TODO</b></p>
<h2>License</h2>
<p><b>TODO</b></p>
<h2>Links to Agile Iterative Process (AIP) Products</h2>
<p>To Project Backlog (Product Backlog, Iteration Backlogs, and Work Log):</p>
<p><a href="https://docs.google.com/spreadsheets/d/1DmnGjTfYCdlwXq4yxJ25zSwCLq8LcW4DftqtF5_p5Tk/edit?usp=sharing">https://docs.google.com/spreadsheets/d/1DmnGjTfYCdlwXq4yxJ25zSwCLq8LcW4DftqtF5_p5Tk/edit?usp=sharing</a></p>
<p>To Sprint Planning Notes/Review:</p>
<p><a href="https://docs.google.com/document/d/1JHqd9Alk2kZUKKPmb6cLGOPEvR-gZKouV5svNGUF8SE/edit?usp=sharing">https://docs.google.com/document/d/1JHqd9Alk2kZUKKPmb6cLGOPEvR-gZKouV5svNGUF8SE/edit?usp=sharing</a></p>
<p>Furthermore, see the "UML" directory of this package for UML files, and Proposal deliverables of the initial proposal in the "Proposal" directory.</p>
<h2>Known Issues/Bugs</h2>
<p><b>TODO</b></p>
<h2>Dependencies</h2>
<p>The following should install all of the required packages (assuming the proper sources have been declared, see <a href="http://wiki.ros.org/melodic/Installation/Ubuntu">ROS Melodic installation</a> otherwise): </p><div class="fragment"><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install git python-rosinstall ros-melodic-desktop-full python-catkin-tools ros-melodic-joint-state-controller ros-melodic-twist-mux ros-melodic-ompl ros-melodic-controller-manager ros-melodic-moveit-core ros-melodic-moveit-ros-perception ros-melodic-moveit-ros-move-group ros-melodic-moveit-kinematics ros-melodic-moveit-ros-planning-interface ros-melodic-moveit-simple-controller-manager ros-melodic-moveit-planners-ompl ros-melodic-joy ros-melodic-joy-teleop ros-melodic-teleop-tools ros-melodic-control-toolbox ros-melodic-sound-play ros-melodic-navigation ros-melodic-depthimage-to-laserscan ros-melodic-moveit-commander</div></div><!-- fragment --><h2>How to</h2>
<h3>Setting Up Your Workspace</h3>
<ul>
<li>Create a catkin workspace and its src directory at e.g. /path/to/tiago_ws/src</li>
<li>Clone this package into the src directory: <div class="fragment"><div class="line">cd /path/to/tiago_ws/src</div><div class="line">git clone https://github.com/rnvandemark/enpm808x_final_inspection_robot.git</div></div><!-- fragment --></li>
<li>Navigate to the catkin workspace: <div class="fragment"><div class="line">cd /path/to/tiago_ws/</div></div><!-- fragment --></li>
<li>Use rosinstall to download additional packages into your workspace, using the additional dependencies declare in this repository's rosinstall file: <div class="fragment"><div class="line"># If needed, replace &#39;enpm808x_final_inspection_robot&#39; with the local name you</div><div class="line"># gave this repository</div><div class="line">rosinstall src /opt/ros/melodic src/enpm808x_final_inspection_robot/dependencies.rosinstall</div></div><!-- fragment --></li>
<li>Set up rosdep and ensure any missing dependencies required by this workspace are met/installed: <div class="fragment"><div class="line">sudo rosdep init</div><div class="line">rosdep update</div><div class="line">cd /path/to/tiago_ws/</div><div class="line">rosdep install --from-paths src --ignore-src -y --rosdistro melodic --skip-keys=&quot;opencv2 opencv2-nonfree pal_laser_filters speed_limit_node sensor_to_cloud hokuyo_node libdw-dev python-graphitesend-pip python-statsd pal_filters pal_vo_server pal_usb_utils pal_pcl pal_pcl_points_throttle_and_filter pal_karto pal_local_joint_control camera_calibration_files pal_startup_msgs pal-orbbec-openni2 dummy_actuators_manager pal_local_planner gravity_compensation_controller current_limit_controller dynamic_footprint dynamixel_cpp tf_lookup opencv3 joint_impedance_trajectory_controller cartesian_impedance_controller omni_base_description omni_drive_controller&quot;</div></div><!-- fragment --></li>
<li>Optionally, add this to ~/.bashrc (and resource as necessary) to restrict message generation for extra languages: <div class="fragment"><div class="line">export ROS_LANG_DISABLE=genlisp:gennodejs:geneus</div></div><!-- fragment --></li>
</ul>
<h3>Building the Program and Tests</h3>
<h4>Building the Package</h4>
<ul>
<li>Prerequisite: you have set up your workspace as described in the previous section, assuming the catkin workspace at e.g. /path/to/tiago_ws/</li>
<li>Navigate to the catkin workspace and build with the build script: <div class="fragment"><div class="line">cd /path/to/tiago_ws/</div><div class="line">./src/enpm808x_final_inspection_robot/bin/build-ws.sh</div></div><!-- fragment --></li>
</ul>
<h4>Building the Tests</h4>
<p>The tests for this package are automatically built with the aforementioned build script, build-ws.sh. See the 'Building the Package' section.</p>
<h3>Running a Sample of the Program</h3>
<p>There are two steps to running the program. The first step, building a digital map of the environment, only has to be done once (but can be done multiple times). Then, every time the 'main' program is ran, it will use the saved map. There are launch files for each of these routines.</p>
<ul>
<li>Prerequisites:<ul>
<li>You have set up your workspace as described in the 'Setting Up Your Workspace' section, assuming the catkin workspace at e.g. /path/to/tiago_ws/</li>
<li>You have built the package as described in the 'Building the Package' section</li>
</ul>
</li>
<li>For each terminal opened, make sure your ROS installation and this workspace are sourced, for example: <div class="fragment"><div class="line">source /opt/ros/melodic/setup.bash</div><div class="line">source /path/to/tiago_ws/install_isolated/setup.bash</div></div><!-- fragment --></li>
</ul>
<h4>Creating a Map of the Environment</h4>
<p>First, launch the mapping configuration with the following command: </p><div class="fragment"><div class="line">roslaunch enpm808x_final_inspection_robot create_map.launch</div></div><!-- fragment --><p>This will start Gazebo, RViz, and multiple TIAGo nodes/utilities. The map is initially empty, and we will have the TIAGo navigate around the environment to build it. To move the robot around, navigate to the RViz window and use the '2D Nav Goal' tool:</p>
<div class="image">
<img src="docs/images/create_map1.png" alt="Create Map Picture #1"/>
</div>
<p>This can be clicked anywhere on the map that has already has been mapped (white pixels). Move around until the map is fully populated, i.e. all floors and walls/obstacles are mapped:</p>
<div class="image">
<img src="docs/images/create_map2.png" alt="Create Map Picture #2"/>
</div>
<p>IN A NEW TERMINAL, run the following command to save the map you have created: </p><div class="fragment"><div class="line">rosservice call /pal_map_manager/save_map &quot;directory: &#39;&#39;&quot;</div></div><!-- fragment --><p>This will save the map at ~/.pal/tiago_maps/config. Confirm it exists. Then, all terminals' processes can be stopped. Record the absolute file path that the map files are saved at, e.g. the output of the service call may look like: </p><div class="fragment"><div class="line">success: True</div><div class="line">name: &quot;2021-12-10_021714&quot;</div><div class="line">full_path: &quot;/home/lu18/.pal/tiago_dual_maps/&quot;</div><div class="line">message: &quot;Map saved: 2021-12-10_021714&quot;</div></div><!-- fragment --><p>So you should record the path as the concatenation of the full path, its name, and another 'configurations' subdirectory </p><div class="fragment"><div class="line">/home/lu18/.pal/tiago_dual_maps/configurations/2021-12-10_021714</div></div><!-- fragment --><h4>Running a Demo of the Main Program</h4>
<p>Prerequisite: you have created a map as described in the previous section</p>
<p>Launch the main program's configuration with the following command: </p><div class="fragment"><div class="line"># Replace &#39;/path/to/maps&#39; with the path to the map data, the example in the</div><div class="line"># previous section was &#39;/home/lu18/.pal/tiago_dual_maps/2021-12-10_021714&#39;</div><div class="line">roslaunch enpm808x_final_inspection_robot main.launch map:=&quot;/path/to/maps&quot;</div></div><!-- fragment --><p>This will start Gazebo with the specified map, RViz, multiple TIAGo nodes/utilities, and nodes created in this project. There are multiple optional arguments for this launch file:</p><ul>
<li>view_image: '1' to also display the raw RGB image in a separate window, '0' otherwise. Default value is '0'.</li>
<li>robot: The TIAGo robot model to use, either 'steel' or 'titanium'. Default value is 'titanium'.</li>
<li>tiago_start_pose: The pose, relative to the world/map frame, to start the TIAGo at. Default value is '-x 0.0 -y 0.0 -z 0.0 -R 0.0 -P 0.0 -Y 0.0'.</li>
<li>extra_gazebo_args: Any additional arguments to also send to Gazebo. The default value is none.</li>
</ul>
<p>Then, cans for inspection must be spawned. There is a demo launch file to spawn a fixed set of cans: 'demo.launch'. The launcher 'spawn_cans_from_list.launch' can be used to spawn a dynamically typed list. For example, this spawns three cans each with a couple of characteristics: </p><div class="fragment"><div class="line">roslaunch enpm808x_final_inspection_robot spawn_cans_from_list.launch can_args_list:=&quot;1,1.0,1.0,0.0 : 0,2.0,1.0,0.0 : 1,-1.0,5.0,0.2&quot;</div></div><!-- fragment --><p>The characteristics for each can are separated by a colon, and each individual characteristic is separated by a comma. These are as follows:</p><ul>
<li>Whether the can is nominal (1) or defective (0).</li>
<li>The remaining three are the {x,y,z} coordinates of the initial spawn point, in meters, relative to the map's coordinate system.</li>
</ul>
<h3>Running the Tests</h3>
<p>The tests for this package can be ran by navigating to the project workspace directory and running the helper script: </p><div class="fragment"><div class="line">cd /path/to/tiago_ws/</div><div class="line">./src/enpm808x_final_inspection_robot/bin/run-tests.sh</div></div><!-- fragment --><h3>Generating Doxygen Docs</h3>
<p><b>TODO</b> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
